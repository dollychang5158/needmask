{"version":3,"sources":["webpack:///./src/assets/mapIcon.svg","webpack:///./src/components/hospital-item.js","webpack:///./src/components/list-item-label.js","webpack:///./src/lib/cities.js","webpack:///./src/components/dropdown.js","webpack:///./src/lib/sort.js","webpack:///./src/pages/index.js"],"names":["React","MapIcon","props","createElement","defaultProps","module","exports","default","memo","coordinates","properties","className","href","length","target","name","address","phone","mask_adult","mask_child","time","cities","placeHolder","current","values","onChange","sm","value","event","selected","disabled","hidden","map","key","SORT_ARRAY","sortFn","sortBy","a","b","IndexPage","useState","hospitals","setHospitals","city","setCity","area","setArea","street","setStreet","setSort","times","setTimes","useEffect","fetch","then","data","json","features","hospital","setTimeout","matchedAreaHospitals","filter","indexOf","sort","matchedHospitals","streets","Set","start","substring","title","Object","keys","index","geometry"],"mappings":"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","file":"component---src-pages-index-js-205686919d4ae36ea205.js","sourcesContent":["var React = require('react');\n\nfunction MapIcon (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"fillRule\":\"evenodd\",\"clipRule\":\"evenodd\",\"d\":\"M10 28.6667C10 28.6667 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10C0 15.5228 10 28.6667 10 28.6667ZM10 14.6667C12.5773 14.6667 14.6667 12.5773 14.6667 10C14.6667 7.42267 12.5773 5.33333 10 5.33333C7.42267 5.33333 5.33333 7.42267 5.33333 10C5.33333 12.5773 7.42267 14.6667 10 14.6667Z\",\"fill\":\"#EB5757\"}));\n}\n\nMapIcon.defaultProps = {\"width\":\"20\",\"height\":\"29\",\"viewBox\":\"0 0 20 29\",\"fill\":\"none\"};\n\nmodule.exports = MapIcon;\n\nMapIcon.default = MapIcon;\n","import React, { memo } from \"react\"\nimport MapIcon from \"../assets/mapIcon.svg\"\n\nconst ListItem = ({ coordinates, properties }) => (\n  <>\n    <a\n      className=\"item\"\n      href={\n        coordinates && coordinates.length > 1\n          ? \"https://www.google.com/maps/?q=\" +\n          coordinates[1] +\n          \",\" +\n          coordinates[0] +\n          \"\"\n          : \"\"\n      }\n      target=\"_blank\"\n    >\n      <div className=\"row item-content\">\n        <div className=\"col col-lg-5 col-12\">\n          <h3 className=\"col-sm font-weight-bold title\">{properties.name}</h3>\n          <p className=\"desc\">{properties.address}</p>\n          <p className=\"desc\">{properties.phone}</p>\n        </div>\n        <div className=\"container detail col-lg-7 col-12\">\n          <div className=\"col-lg-5 col-5 number adult\"><p><span>成人</span>{properties.mask_adult}</p></div>\n          <div className=\"col-lg-5 col-5 number child\"><p><span>兒童</span>{properties.mask_child}</p></div>\n          <div className=\"col-lg-2 col-2 map\"><MapIcon/></div>\n        </div>\n        <div className=\"container time hide\">\n          <p className=\"col title\">營業時間:</p>\n          <p className=\"col desc\">週一～週日：9:00~18:00{properties.time}</p>\n        </div>\n      </div>\n    </a>\n    <span className=\"item-bottom-space\" />\n  </>\n)\n\nexport default memo(ListItem)\n","import React from \"react\"\n// import YellowBox from \"./yellow-box\"\n\nexport default () => (\n  <div className=\"row item-title\">\n    <div className=\"col-lg-5 col-12\">\n      <p className=\"title\">醫事機構資訊</p>\n    </div>\n    <div className=\"col-lg-3 col-5\">\n      <p className=\"title\">成人口罩剩餘數量</p>\n    </div>\n    <div className=\"col-lg-3 col-5\">\n      <p className=\"title\">兒童口罩剩餘數量</p>\n    </div>\n    <div className=\"col-lg-1 col-2\">\n      <p className=\"title\">地圖</p>\n    </div>\n  </div>\n)\n","const cities = {\n    '台北市': [\n        '中正區', '大同區', '中山區', '萬華區', '信義區', '松山區', '大安區', '南港區', '北投區', '內湖區', '士林區', '文山區'\n    ],\n    '新北市': [\n        '板橋區', '新莊區', '泰山區', '林口區', '淡水區', '金山區', '八里區', '萬里區', '石門區', '三芝區', '瑞芳區', '汐止區', '平溪區', '貢寮區', '雙溪區', '深坑區', '石碇區', '新店區', '坪林區', '烏來區', '中和區', '永和區', '土城區', '三峽區', '樹林區', '鶯歌區', '三重區', '蘆洲區', '五股區'\n    ],\n    '基隆市': [\n        '仁愛區', '中正區', '信義區', '中山區', '安樂區', '暖暖區', '七堵區'\n    ],\n    '桃園市': [\n        '桃園區', '中壢區', '平鎮區', '八德區', '楊梅區', '蘆竹區', '龜山區', '龍潭區', '大溪區', '大園區', '觀音區', '新屋區', '復興區'\n    ],\n    '新竹縣': [\n        '竹北市', '竹東鎮', '新埔鎮', '關西鎮', '峨眉鄉', '寶山鄉', '北埔鄉', '橫山鄉', '芎林鄉', '湖口鄉', '新豐鄉', '尖石鄉', '五峰鄉'\n    ],\n    '新竹市': [\n        '東區', '北區', '香山區'\n    ],\n    '苗栗縣': [\n        '苗栗市', '通霄鎮', '苑裡鎮', '竹南鎮', '頭份鎮', '後龍鎮', '卓蘭鎮', '西湖鄉', '頭屋鄉', '公館鄉', '銅鑼鄉', '三義鄉', '造橋鄉', '三灣鄉', '南庄鄉', '大湖鄉', '獅潭鄉', '泰安鄉'\n    ],\n    '台中市': [\n        '中區', '東區', '南區', '西區', '北區', '北屯區', '西屯區', '南屯區', '太平區', '大里區', '霧峰區', '烏日區', '豐原區', '后里區', '東勢區', '石岡區', '新社區', '和平區', '神岡區', '潭子區', '大雅區', '大肚區', '龍井區', '沙鹿區', '梧棲區', '清水區', '大甲區', '外埔區', '大安區'\n    ],\n    '南投縣': [\n        '南投市', '埔里鎮', '草屯鎮', '竹山鎮', '集集鎮', '名間鄉', '鹿谷鄉', '中寮鄉', '魚池鄉', '國姓鄉', '水里鄉', '信義鄉', '仁愛鄉'\n    ],\n    '彰化縣': [\n        '彰化市', '員林鎮', '和美鎮', '鹿港鎮', '溪湖鎮', '二林鎮', '田中鎮', '北斗鎮', '花壇鄉', '芬園鄉', '大村鄉', '永靖鄉', '伸港鄉', '線西鄉', '福興鄉', '秀水鄉', '埔心鄉', '埔鹽鄉', '大城鄉', '芳苑鄉', '竹塘鄉', '社頭鄉', '二水鄉', '田尾鄉', '埤頭鄉', '溪州鄉'\n    ],\n    '雲林縣': [\n        '斗六市', '斗南鎮', '虎尾鎮', '西螺鎮', '土庫鎮', '北港鎮', '莿桐鄉', '林內鄉', '古坑鄉', '大埤鄉', '崙背鄉', '二崙鄉', '麥寮鄉', '台西鄉', '東勢鄉', '褒忠鄉', '四湖鄉', '口湖鄉', '水林鄉', '元長鄉'\n    ],\n    '嘉義縣': [\n        '太保市', '朴子市', '布袋鎮', '大林鎮', '民雄鄉', '溪口鄉', '新港鄉', '六腳鄉', '東石鄉', '義竹鄉', '鹿草鄉', '水上鄉', '中埔鄉', '竹崎鄉', '梅山鄉', '番路鄉', '大埔鄉', '阿里山鄉'\n    ],\n    '嘉義市': [\n        '東區', '西區'\n    ],\n    '台南市': [\n        '中西區', '東區', '南區', '北區', '安平區', '安南區', '永康區', '歸仁區', '新化區', '左鎮區', '玉井區', '楠西區', '南化區', '仁德區', '關廟區', '龍崎區', '官田區', '麻豆區', '佳里區', '西港區', '七股區', '將軍區', '學甲區', '北門區', '新營區', '後壁區', '白河區', '東山區', '六甲區', '下營區', '柳營區', '鹽水區', '善化區', '大內區', '山上區', '新市區', '安定區'\n    ],\n    '高雄市': [\n        '楠梓區', '左營區', '鼓山區', '三民區', '鹽埕區', '前金區', '新興區', '苓雅區', '前鎮區', '小港區', '旗津區', '鳳山區', '大寮區', '鳥松區', '林園區', '仁武區', '大樹區', '大社區', '岡山區', '路竹區', '橋頭區', '梓官區', '彌陀區', '永安區', '燕巢區', '田寮區', '阿蓮區', '茄萣區', '湖內區', '旗山區', '美濃區', '內門區', '杉林區', '甲仙區', '六龜區', '茂林區', '桃源區', '那瑪夏區'\n    ],\n    '屏東縣': [\n        '屏東市', '潮州鎮', '東港鎮', '恆春鎮', '萬丹鄉', '長治鄉', '麟洛鄉', '九如鄉', '里港鄉', '鹽埔鄉', '高樹鄉', '萬巒鄉', '內埔鄉', '竹田鄉', '新埤鄉', '枋寮鄉', '新園鄉', '崁頂鄉', '林邊鄉', '南州鄉', '佳冬鄉', '琉球鄉', '車城鄉', '滿州鄉', '枋山鄉', '霧台鄉', '瑪家鄉', '泰武鄉', '來義鄉', '春日鄉', '獅子鄉', '牡丹鄉', '三地門鄉'\n    ],\n    '宜蘭縣': [\n        '宜蘭市', '羅東鎮', '蘇澳鎮', '頭城鎮', '礁溪鄉', '壯圍鄉', '員山鄉', '冬山鄉', '五結鄉', '三星鄉', '大同鄉', '南澳鄉'\n    ],\n    '花蓮縣': [\n        '花蓮市', '鳳林鎮', '玉里鎮', '新城鄉', '吉安鄉', '壽豐鄉', '秀林鄉', '光復鄉', '豐濱鄉', '瑞穗鄉', '萬榮鄉', '富里鄉', '卓溪鄉'\n    ],\n    '台東縣': [\n        '台東市', '成功鎮', '關山鎮', '長濱鄉', '海端鄉', '池上鄉', '東河鄉', '鹿野鄉', '延平鄉', '卑南鄉', '金峰鄉', '大武鄉', '達仁鄉', '綠島鄉', '蘭嶼鄉', '太麻里鄉'\n    ],\n    '澎湖縣': [\n        '馬公市', '湖西鄉', '白沙鄉', '西嶼鄉', '望安鄉', '七美鄉'\n    ],\n    '金門縣': [\n        '金城鎮', '金湖鎮', '金沙鎮', '金寧鄉', '烈嶼鄉', '烏坵鄉'\n    ],\n    '連江縣': [\n        '南竿鄉', '北竿鄉', '莒光鄉', '東引鄉'\n    ]\n}\n\nexport {\n    cities\n}","import React, { memo } from \"react\"\nconst DropDown = ({ placeHolder, current, values, onChange, sm }) => (\n  <select\n    value={current}\n    className={\"custom-select custom-select-lg\"}\n    // +(sm?\"col-lg-4\":\"col-3\")\n    onChange={event => {\n      onChange(event.target.value)\n    }}\n  >\n    {placeHolder && <option value=\"\" selected disabled hidden></option>}\n    {values.map(value => (\n      <option key={value} value={value}>\n        {value}\n      </option>\n    ))}\n  </select>\n)\nexport default memo(DropDown)\n","const SORT_BY_TOTAL = \"總數\"\nconst SORT_BY_ADULT = \"成人\"\nconst SORT_BY_CHILD = \"兒童\"\nconst SORT_ARRAY = [SORT_BY_TOTAL, SORT_BY_ADULT, SORT_BY_CHILD]\n\nconst sortFn = (sortBy) => (a, b) => {\n  if (sortBy === SORT_BY_ADULT) {\n    return a.properties.mask_adult > b.properties.mask_adult ? -1 : 1\n  } else if (sortBy === SORT_BY_CHILD) {\n    return a.properties.mask_child > b.properties.mask_child ? -1 : 1\n  } else if (sortBy === SORT_BY_TOTAL) {\n    return a.properties.mask_adult + a.properties.mask_child >\n      b.properties.mask_adult + b.properties.mask_child\n      ? -1\n      : 1\n  }\n}\nexport { SORT_BY_TOTAL, SORT_BY_ADULT, SORT_BY_CHILD, SORT_ARRAY, sortFn }\n","import React, { useEffect, useState } from \"react\"\nimport ListItem from \"../components/hospital-item\"\nimport ListItemLabel from \"../components/list-item-label\"\nimport { cities } from \"../lib/cities\"\nimport DropDown from \"../components/dropdown\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { Link } from \"gatsby\"\nimport { SORT_BY_TOTAL, SORT_ARRAY, sortFn } from \"../lib/sort\"\n\nconst IndexPage = () => {\n  const [hospitals, setHospitals] = useState([])\n  const [city, setCity] = useState(\"台北市\")\n  const [area, setArea] = useState(\"中正區\")\n  const [street, setStreet] = useState(\"\")\n  const [sortBy, setSort] = useState(SORT_BY_TOTAL)\n  const [times, setTimes] = useState(0)\n\n  useEffect(() => {\n    fetch(\n      \"https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json\"\n    )\n      .then(data => data.json())\n      .then(data => {\n        setHospitals(data.features.map(hospital => hospital))\n      })\n  }, [times])\n\n  setTimeout(() => {\n    setTimes(times + 1)\n  }, 1000 * 60 * 2)\n\n  const matchedAreaHospitals = hospitals\n    .filter(hospital => {\n      return hospital.properties.address.indexOf(city + area) !== -1\n    })\n    .sort(sortFn(sortBy))\n\n  const matchedHospitals = hospitals.filter(hospital => {\n    return hospital.properties.address.indexOf(city + area + street) !== -1\n  }).sort(sortFn(sortBy))\n\n  const streets = [\n    ...new Set(\n      matchedAreaHospitals.map(hospital => {\n        const start = (city + area).length\n        return hospital.properties.address.substring(start, start + 3)\n      })\n    ),\n  ]\n\n  const handleCityChange = city => {\n    setCity(city)\n    setArea(cities[city][0])\n    setStreet(\"\")\n  }\n\n  const handleAreaChange = area => {\n    setArea(area)\n    setStreet(\"\")\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Need Mask\" />\n      <>\n        <div className=\"container block01\">\n          <div className=\"search\">\n            <p>點擊位置，尋找你/妳的口罩：</p>\n            <div className=\"select-group\">\n              <DropDown\n                placeHolder\n                current={city}\n                onChange={handleCityChange}\n                values={Object.keys(cities)}\n              />\n              <span />\n              <DropDown\n                placeHolder\n                current={area}\n                onChange={handleAreaChange}\n                values={cities[city]}\n              />\n              <span />\n              <DropDown\n                placeHolder\n                current={street}\n                onChange={setStreet}\n                values={streets}\n              />\n            </div>\n            <div className=\"note\">\n              <p>\n                ＊資料每兩分鐘更新一次，預設排序為該區剩餘口罩總計數量 多 > 少。\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container block02\">\n          <div className=\"sort\">\n            <div className=\"sort-item\">\n              {/* <p>排序：</p> */}\n              <DropDown\n                sm\n                current={sortBy}\n                onChange={setSort}\n                values={SORT_ARRAY}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container block03\">\n          <ListItemLabel />\n        </div>\n\n        <div className=\"block04\">\n          <div className=\"container item-content-group\">\n            {matchedHospitals.map((hospital, index) => (\n              <ListItem\n                key={index}\n                properties={hospital.properties}\n                coordinates={hospital.geometry.coordinates}\n              />\n            ))}\n          </div>\n        </div>\n      </>\n    </Layout>\n  )\n}\n\nexport default IndexPage\n"],"sourceRoot":""}